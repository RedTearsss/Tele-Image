
<!doctype html>
<html data-n-head-ssr>
  <script>
  // 等待整个文档加载完毕
document.addEventListener('DOMContentLoaded', function() {
    var lastInputValue = ''; // 用于存储上一次输入框的值
    var timer; // 用于存储定时器的引用

    // 等待输入框元素生成
    var waitForElement = setInterval(function() {
        var inputElement = document.getElementById('url-content');
        if (inputElement) {
            var url = inputElement.value.trim(); // 获取输入框的值
            if (url !== '' && url !== lastInputValue) {
                lastInputValue = url; // 更新上一次输入框的值

                var altText = url.split('/').pop(); // 获取图片链接的最后一部分作为 Alt Text
                var markdownImage = `![${altText}](${url})`;
                console.log('生成的 Markdown 格式的图片链接：', markdownImage);

                // 检查并删除已有的 Markdown 输入框和按钮
                var existingMarkdownDiv = document.querySelector('.markdown-container');
                if (existingMarkdownDiv) {
                    existingMarkdownDiv.remove();
                }

                // 创建包含 Markdown 链接和复制文本按钮的新元素
                var newDiv = document.createElement('div');
                newDiv.classList.add('markdown-container');
                newDiv.style.display = 'flex'; // 设置样式
                newDiv.style.alignItems = 'center';
                newDiv.style.marginBottom = '10px';

                // 创建显示 Markdown 链接的文本框元素
                var markdownInput = document.createElement('input');
                markdownInput.setAttribute('type', 'text');
                markdownInput.setAttribute('readonly', 'readonly');
                markdownInput.value = markdownImage; // 将 Markdown 链接赋值给文本框
                markdownInput.style.flexGrow = '1'; // 设置样式
                markdownInput.style.marginRight = '10px';
                markdownInput.style.padding = '5px';
                markdownInput.style.border = '1px solid #ccc';
                markdownInput.style.borderRadius = '4px';

                // 创建复制文本按钮元素
                var copyButton = document.createElement('span');
                copyButton.textContent = '复制Markdown';
                copyButton.style.padding = '5px 10px'; // 设置样式
                copyButton.style.backgroundColor = '#007bff';
                copyButton.style.color = 'white';
                copyButton.style.border = 'none';
                copyButton.style.borderRadius = '4px';
                copyButton.style.cursor = 'pointer';
                copyButton.style.minWidth = '114px'; // 设置最小宽度以防止文本变化时宽度变化
                copyButton.style.textAlign = 'center'; // 居中文字
                copyButton.addEventListener('click', function() {
                    // 复制文本按钮的点击事件处理函数
                    markdownInput.select();
                    document.execCommand('copy');
                    copyButton.textContent = '已复制';
                    copyButton.style.pointerEvents = 'none'; // 禁用按钮点击
                    console.log('已复制文本:', markdownInput.value);
                    
                    // 2秒后将按钮文本恢复为“复制Markdown”
                    setTimeout(function() {
                        copyButton.textContent = '复制Markdown';
                        copyButton.style.pointerEvents = 'auto'; // 允许按钮再次点击
                    }, 2000);
                });
                copyButton.addEventListener('mouseover', function() {
                    copyButton.style.backgroundColor = '#0056b3'; // 悬停样式
                });
                copyButton.addEventListener('mouseout', function() {
                    copyButton.style.backgroundColor = '#007bff'; // 恢复原样式
                });

                // 将 Markdown 输入框和复制文本按钮添加到新创建的 div 中
                newDiv.appendChild(markdownInput);
                newDiv.appendChild(copyButton);

                // 获取要插入新元素的位置（通过类名获取元素）
                var urlBoxElements = document.querySelectorAll('.url-box[data-v-793b8fc8=""]');
                if (urlBoxElements.length > 0) {
                    // 获取第一个匹配的元素并在其之前插入新创建的 div
                    var urlBox = urlBoxElements[0];
                    urlBox.parentNode.insertBefore(newDiv, urlBox);
                } else {
                    console.error('未找到类名为 url-box 且 data-v-793b8fc8 属性为空的元素！');
                }
            }

            // 如果定时器存在，则清除定时器
            if (timer) {
                clearTimeout(timer);
            }

            // 设置2分钟后关闭定时器
            timer = setTimeout(function() {
                clearInterval(waitForElement); // 停止等待输入框元素的检查
                console.log('定时器已关闭');
            }, 2 * 60 * 1000); // 2分钟，单位是毫秒
        }
    }, 1000); // 每1000毫秒检查一次是否生成了输入框元素
});
  </script>
  <head>
    <title>ImageZzz</title>
    <meta data-n-head="ssr" charset="utf-8">
    <meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1">
    <meta data-n-head="ssr" data-hid="description" name="description" content="免费图床，基于Telegraph的图片上传工具">
    <link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="preload" href="/_nuxt/318bf53201c4127c79fc.js" as="script">
    <link rel="preload" href="/_nuxt/71ef7c30e68aba4a3fc9.js" as="script">
    <link rel="preload" href="/_nuxt/9e35552f648a5a6a3b24.js" as="script">
    <link rel="preload" href="/_nuxt/fbd198cfd0f4459e2725.js" as="script">
    <link rel="preload" href="/_nuxt/b46e75617207ae5013d0.js" as="script">
    <link rel="stylesheet" type="text/css" href="/style.css">   
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="container" data-v-5e6831cc><div class="background-container" data-v-045ae8ab data-v-5e6831cc><div id="background-slider" data-v-045ae8ab></div></div> <div class="header" data-v-c757ee00 data-v-5e6831cc><svg width="22" height="22" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c757ee00><circle cx="24" cy="24" r="20" stroke="#fff" stroke-width="4" stroke-linecap="butt" stroke-linejoin="miter" data-v-c757ee00></circle> <path d="M9 37L17 28L33 41" stroke="#fff" stroke-width="4" stroke-linecap="butt" stroke-linejoin="miter" data-v-c757ee00></path> <circle cx="18" cy="17" r="4" fill="none" stroke="#fff" stroke-width="4" data-v-c757ee00></circle> <path d="M24 33L32 23L42 31" stroke="#fff" stroke-width="4" stroke-linecap="butt" stroke-linejoin="miter" data-v-c757ee00></path></svg></div> <div class="main" data-v-5e6831cc><div class="title" data-v-5e6831cc>ImageZzz</div> <div id="paste" class="upload-main" data-v-793b8fc8 data-v-5e6831cc><div class="wrapper waitting" data-v-793b8fc8><div class="area waitting" data-v-793b8fc8><div class="svg-wrapper flex" data-v-793b8fc8><div class="svg-box" data-v-793b8fc8><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="upload-icon" data-v-793b8fc8><path d="M422.4 704l-94.72-143.36c-15.36-23.04-46.08-30.72-71.68-15.36l-15.36 15.36-130.56 204.8c-12.8 25.6-7.68 56.32 17.92 71.68 7.68 5.12 17.92 7.68 25.6 7.68h256c28.16 0 51.2-23.04 51.2-51.2 0-7.68-2.56-15.36-5.12-23.04l-33.28-66.56z" fill="#A5C8F4" data-v-793b8fc8></path> <path d="M307.2 358.4c-43.52 0-76.8-33.28-76.8-76.8s33.28-76.8 76.8-76.8 76.8 33.28 76.8 76.8-33.28 76.8-76.8 76.8z m327.68-33.28c5.12-7.68 12.8-15.36 20.48-17.92 25.6-12.8 56.32 0 69.12 23.04L944.64 793.6c2.56 7.68 5.12 15.36 5.12 23.04 0 28.16-23.04 51.2-51.2 51.2H378.88c-10.24 0-20.48-2.56-30.72-10.24-23.04-15.36-28.16-48.64-12.8-71.68l56.32-79.36 243.2-381.44z" fill="#2589FF" data-v-793b8fc8></path></svg></div></div> <div class="text-area" data-v-793b8fc8><span data-v-793b8fc8>也可直接截图并粘贴到这里</span></div> <div class="upload-btn-area" data-v-793b8fc8><input accept="image/jpeg, image/png, image/gif, video/mp4" id="upFiles" name="Files" type="file" data-v-793b8fc8> <label for="upFiles" class="btn-upload" data-v-793b8fc8>选择上传图片或视频</label></div></div> <div class="area uploading" style="display:none" data-v-793b8fc8><div class="svg-wrapper flex" data-v-793b8fc8><div class="svg-box" data-v-793b8fc8><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="upload-icon" data-v-793b8fc8><path d="M554.666667 268.8v601.6h-85.333334V268.8L337.066667 401.066667 277.333333 341.333333 512 106.666667 746.666667 341.333333l-59.733334 59.733334L554.666667 268.8z" fill="#0075ff" data-v-793b8fc8></path></svg></div></div> <div class="text-area" data-v-793b8fc8><span data-v-793b8fc8>正在上传，请稍等…</span></div></div> <div class="area done" style="display:none" data-v-793b8fc8><div class="svg-wrapper flex" data-v-793b8fc8><div class="svg-box" data-v-793b8fc8><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="upload-icon" data-v-793b8fc8><path d="M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z" fill="#0075ff" data-v-793b8fc8></path></svg></div></div> <div class="text-area" data-v-793b8fc8><span data-v-793b8fc8>复制下面的图片地址 或者 取消重新上传</span></div> <div class="url-box" data-v-793b8fc8><div class="copy-url" style="display:none" data-v-793b8fc8><div class="input-group" data-v-793b8fc8><input readonly id="url-content" class="input-sm" data-v-793b8fc8> <div data-clipboard-target="#url-content" class="input-group-button" data-v-793b8fc8><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 14 16" width="14" class="octicon octicon-clippy" data-v-793b8fc8><path d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z" fill-rule="evenodd" data-v-793b8fc8></path></svg></div></div> <div class="re-upload" data-v-793b8fc8><svg height="26" viewBox="0 0 1024 1024" width="26" xmlns="http://www.w3.org/2000/svg" data-v-793b8fc8><path d="M396.8 200.533333l64 64L384 341.333333h298.666667c119.466667 0 213.333333 93.866667 213.333333 213.333334s-93.866667 213.333333-213.333333 213.333333H298.666667v-85.333333h384c72.533333 0 128-55.466667 128-128s-55.466667-128-128-128H170.666667l226.133333-226.133334z" fill="#d73a49" p-id="7650" data-v-793b8fc8></path></svg></div></div></div></div> <div class="area error" style="display:none" data-v-793b8fc8><div class="svg-wrapper flex" data-v-793b8fc8><div class="svg-box" data-v-793b8fc8><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="upload-icon" data-v-793b8fc8><path d="M809.222867 150.531412 868.688213 210.004945 568.397986 510.292102 868.688213 810.587446 809.222867 870.055862 508.93264 569.771775 208.644459 870.055862 149.169903 810.587446 449.461153 510.292102 149.169903 210.004945 208.644459 150.531412 508.93264 450.823686Z" fill="#d81e06" data-v-793b8fc8></path></svg></div></div> <div class="text-area" data-v-793b8fc8><span data-v-793b8fc8>出错啦，请重新上传</span></div></div></div></div></div> <div class="footer" data-v-5d5649c4 data-v-5e6831cc>
  基于 <a href="https://github.com/cf-pages/Telegraph-Image" target="_blank" data-v-5d5649c4>Telegraph</a> 的图片上传工具
</div></div></div></div></div><script>window.__NUXT__={layout:"default",data:[{}],error:null,serverRendered:!0}</script><script src="/_nuxt/318bf53201c4127c79fc.js" defer></script><script src="/_nuxt/b46e75617207ae5013d0.js" defer></script><script src="/_nuxt/71ef7c30e68aba4a3fc9.js" defer></script><script src="/_nuxt/9e35552f648a5a6a3b24.js" defer></script><script src="/_nuxt/fbd198cfd0f4459e2725.js" defer></script>
  </body>
</html>
